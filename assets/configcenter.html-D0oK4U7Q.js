import{_ as k}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as r,d as i,b as h,a as d,w as a,r as p,o as c,e as s}from"./app-B4U74qqU.js";const g={};function y(B,l){const e=p("CodeTabs");return c(),r("div",null,[l[6]||(l[6]=i("h2",{id:"fsnotify-实现",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#fsnotify-实现"},[i("span",null,"fsnotify 实现")])],-1)),h(e,{id:"3",data:[{id:"main.go"},{id:"etc/etc.yaml"}],"tab-id":"shell"},{title0:a(({value:n,isActive:t})=>[...l[0]||(l[0]=[s("main.go",-1)])]),title1:a(({value:n,isActive:t})=>[...l[1]||(l[1]=[s("etc/etc.yaml",-1)])]),tab0:a(({value:n,isActive:t})=>[...l[2]||(l[2]=[i("div",{class:"language-go line-numbers-mode","data-highlighter":"shiki","data-ext":"go","data-title":"go",style:{"--shiki-light":"#24292e","--shiki-dark":"#abb2bf","--shiki-light-bg":"#fff","--shiki-dark-bg":"#282c34"}},[i("pre",{class:"shiki shiki-themes github-light one-dark-pro vp-code"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C678DD"}},"package"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#E5C07B"}}," main")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C678DD"}},"import"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}}," (")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#98C379"}},'	"'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#98C379"}},"fmt"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#98C379"}},'"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#98C379"}},'	"'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#98C379"}},"github.com/jzero-io/jzero/core/configcenter"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#98C379"}},'"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#98C379"}},'	"'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#98C379"}},"github.com/jzero-io/jzero/core/configcenter/subscriber"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#98C379"}},'"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#98C379"}},'	"'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#98C379"}},"github.com/zeromicro/go-zero/core/stores/sqlx"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#98C379"}},'"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},")")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C678DD"}},"type"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#E5C07B"}}," Config"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C678DD"}}," struct"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}},"	Sqlx"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#E5C07B"}}," sqlx"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#E5C07B"}},"SqlConf")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C678DD"}},"func"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#61AFEF"}}," main"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"() {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}},"	cc"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#E5C07B"}}," :="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}}," configcenter"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#61AFEF"}},"MustNewConfigCenter"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"["),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#E5C07B"}},"Config"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"](")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#E5C07B"}},"		configcenter"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#E5C07B"}},"Config"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"{"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}},"Type"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},": "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#98C379"}},'"yaml"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"},")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}},"		subscriber"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#61AFEF"}},"MustNewFsnotifySubscriber"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#98C379"}},'"etc/etc.yaml"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"),")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"	)")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-light-font-style":"inherit","--shiki-dark":"#7F848E","--shiki-dark-font-style":"italic"}},"	// 支持环境变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}},"	cc"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#E5C07B"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}}," configcenter"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#61AFEF"}},"MustNewConfigCenter"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"["),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#E5C07B"}},"Config"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"](")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#E5C07B"}},"		configcenter"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#E5C07B"}},"Config"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"{"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}},"Type"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},": "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#98C379"}},'"yaml"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"},")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}},"		subscriber"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#61AFEF"}},"MustNewFsnotifySubscriber"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#98C379"}},'"etc/etc.yaml"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},", "),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}},"subscriber"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#61AFEF"}},"WithUseEnv"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#D19A66"}},"true"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},")),")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"	)")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-light-font-style":"inherit","--shiki-dark":"#7F848E","--shiki-dark-font-style":"italic"}},"	// 设置配置变更回调")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}},"	cc"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#61AFEF"}},"AddListener"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C678DD"}},"func"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"() {})")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-light-font-style":"inherit","--shiki-dark":"#7F848E","--shiki-dark-font-style":"italic"}},"	// 获取配置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}},"	cfg"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},", "),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}},"err"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#E5C07B"}}," :="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}}," cc"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#61AFEF"}},"GetConfig"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"()")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C678DD"}},"	if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}}," err"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#56B6C2"}}," !="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#D19A66"}}," nil"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#61AFEF"}},"		panic"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}},"err"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"	}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-light-font-style":"inherit","--shiki-dark":"#7F848E","--shiki-dark-font-style":"italic"}},"	// 必须获取配置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}},"	cfg"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#E5C07B"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}}," cc"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#61AFEF"}},"MustGetConfig"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"()")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}},"	fmt"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#61AFEF"}},"Println"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}},"cfg"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"}")])])]),i("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"})])],-1)])]),tab1:a(({value:n,isActive:t})=>[...l[3]||(l[3]=[i("div",{class:"language-yaml line-numbers-mode","data-highlighter":"shiki","data-ext":"yaml","data-title":"yaml",style:{"--shiki-light":"#24292e","--shiki-dark":"#abb2bf","--shiki-light-bg":"#fff","--shiki-dark-bg":"#282c34"}},[i("pre",{class:"shiki shiki-themes github-light one-dark-pro vp-code"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#E06C75"}},"sqlx"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#E06C75"}},"    datasource"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},": "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#98C379"}},'"jzero-admin.db"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#E06C75"}},"    driverName"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},": "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#98C379"}},'"sqlite"')])])]),i("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"})])],-1)])]),_:1}),l[7]||(l[7]=d(`<h3 id="使用环境变量" tabindex="-1"><a class="header-anchor" href="#使用环境变量"><span>使用环境变量</span></a></h3><div class="hint-container tip"><p class="hint-container-title">提示</p><p>参考 <a href="https://github.com/a8m/envsubst" target="_blank" rel="noopener noreferrer">envsubst</a> 查看更多环境变量的设置方法</p></div><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="yaml" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">sqlx</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # 从 DATASOURCE 获取 sqlx 的 datasource 配置, 未配置则为 jzero-admin.db</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">    datasource</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;\${DATASOURCE:-jzero-admin.db}&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # 从 DRIVER_NAME 获取 sqlx 的 driverName 配置, 未配置则为 sqlite</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">    driverName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;\${DRIVER_NAME:-sqlite}&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="etcd-实现" tabindex="-1"><a class="header-anchor" href="#etcd-实现"><span>etcd 实现</span></a></h2>`,4)),h(e,{id:"23",data:[{id:"main.go"}],"tab-id":"shell"},{title0:a(({value:n,isActive:t})=>[...l[4]||(l[4]=[s("main.go",-1)])]),tab0:a(({value:n,isActive:t})=>[...l[5]||(l[5]=[i("div",{class:"language-go line-numbers-mode","data-highlighter":"shiki","data-ext":"go","data-title":"go",style:{"--shiki-light":"#24292e","--shiki-dark":"#abb2bf","--shiki-light-bg":"#fff","--shiki-dark-bg":"#282c34"}},[i("pre",{class:"shiki shiki-themes github-light one-dark-pro vp-code"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C678DD"}},"package"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#E5C07B"}}," main")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C678DD"}},"import"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}}," (")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#98C379"}},'	"'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#98C379"}},"fmt"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#98C379"}},'"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#98C379"}},'	"'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#98C379"}},"github.com/jzero-io/jzero/core/configcenter"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#98C379"}},'"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#98C379"}},'	"'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#98C379"}},"github.com/jzero-io/jzero/core/configcenter/subscriber"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#98C379"}},'"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#98C379"}},'	"'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#98C379"}},"github.com/zeromicro/go-zero/core/stores/sqlx"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#98C379"}},'"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},")")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C678DD"}},"type"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#E5C07B"}}," Config"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C678DD"}}," struct"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}},"	Sqlx"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#E5C07B"}}," sqlx"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#E5C07B"}},"SqlConf")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C678DD"}},"func"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#61AFEF"}}," main"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"() {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}},"	cc"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#E5C07B"}}," :="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}}," configcenter"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#61AFEF"}},"MustNewConfigCenter"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"["),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#E5C07B"}},"Config"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"](")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#E5C07B"}},"		configcenter"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#E5C07B"}},"Config"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"{"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}},"Type"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},": "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#98C379"}},'"yaml"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"},")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}},"		subscriber"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#61AFEF"}},"MustNewEtcdSubscriber"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#E5C07B"}},"subscriber"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#E5C07B"}},"EtcdConf"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}},"			Hosts"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},": []"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C678DD"}},"string"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"{"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#98C379"}},'"127.0.0.1:2379"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"},")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}},"			Key"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},":   "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#98C379"}},'"jzero-admin"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},",")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"		}),")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"	)")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-light-font-style":"inherit","--shiki-dark":"#7F848E","--shiki-dark-font-style":"italic"}},"	// 设置配置变更回调")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}},"	cc"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#61AFEF"}},"AddListener"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C678DD"}},"func"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"() {})")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-light-font-style":"inherit","--shiki-dark":"#7F848E","--shiki-dark-font-style":"italic"}},"	// 获取配置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}},"	cfg"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},", "),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}},"err"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#E5C07B"}}," :="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}}," cc"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#61AFEF"}},"GetConfig"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"()")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C678DD"}},"	if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}}," err"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#56B6C2"}}," !="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#D19A66"}}," nil"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#61AFEF"}},"		panic"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}},"err"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"	}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-light-font-style":"inherit","--shiki-dark":"#7F848E","--shiki-dark-font-style":"italic"}},"	// 必须获取配置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}},"	cfg"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#E5C07B"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}}," cc"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#61AFEF"}},"MustGetConfig"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"()")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}},"	fmt"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#61AFEF"}},"Println"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}},"cfg"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"}")])])]),i("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"})])],-1)])]),_:1})])}const F=k(g,[["render",y],["__file","configcenter.html.vue"]]),m=JSON.parse('{"path":"/component/configcenter.html","title":"configcenter(配置中心)","lang":"zh-CN","frontmatter":{"title":"configcenter(配置中心)","icon":"catppuccin:astro-config","order":1,"description":"fsnotify 实现 使用环境变量 提示 参考 envsubst 查看更多环境变量的设置方法 etcd 实现","head":[["meta",{"property":"og:url","content":"https://docs.jzero.io/component/configcenter.html"}],["meta",{"property":"og:site_name","content":"Jzero Framework"}],["meta",{"property":"og:title","content":"configcenter(配置中心)"}],["meta",{"property":"og:description","content":"fsnotify 实现 使用环境变量 提示 参考 envsubst 查看更多环境变量的设置方法 etcd 实现"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-12-17T01:47:26.000Z"}],["meta",{"property":"article:author","content":"jaronnie"}],["meta",{"property":"article:modified_time","content":"2025-12-17T01:47:26.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"configcenter(配置中心)\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-12-17T01:47:26.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"jaronnie\\",\\"url\\":\\"https://github.com/jaronnie\\"}]}"]]},"headers":[{"level":2,"title":"fsnotify 实现","slug":"fsnotify-实现","link":"#fsnotify-实现","children":[{"level":3,"title":"使用环境变量","slug":"使用环境变量","link":"#使用环境变量","children":[]}]},{"level":2,"title":"etcd 实现","slug":"etcd-实现","link":"#etcd-实现","children":[]}],"git":{"createdTime":1765868795000,"updatedTime":1765936046000,"contributors":[{"name":"jaron","email":"jaron@jaronnie.com","commits":2}]},"readingTime":{"minutes":0.83,"words":248},"filePathRelative":"component/configcenter.md","localizedDate":"2025年12月16日","excerpt":"<h2>fsnotify 实现</h2>\\n\\n<h3>使用环境变量</h3>\\n<div class=\\"hint-container tip\\">\\n<p class=\\"hint-container-title\\">提示</p>\\n<p>参考 <a href=\\"https://github.com/a8m/envsubst\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">envsubst</a> 查看更多环境变量的设置方法</p>\\n</div>\\n<div class=\\"language-yaml line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"yaml\\" data-title=\\"yaml\\" style=\\"--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes github-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#22863A;--shiki-dark:#E06C75\\">sqlx</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">:</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\\">    # 从 DATASOURCE 获取 sqlx 的 datasource 配置, 未配置则为 jzero-admin.db</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#22863A;--shiki-dark:#E06C75\\">    datasource</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">: </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"${DATASOURCE:-jzero-admin.db}\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\\">    # 从 DRIVER_NAME 获取 sqlx 的 driverName 配置, 未配置则为 sqlite</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#22863A;--shiki-dark:#E06C75\\">    driverName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">: </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">\\"${DRIVER_NAME:-sqlite}\\"</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{F as comp,m as data};
